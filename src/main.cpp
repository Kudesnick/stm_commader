/***************************************************************************************************
 *   Project:     
 *   Author:        Stulov Tikhon (kudesnick@inbox.ru)
 ***************************************************************************************************
 *   Distribution:  
 *
 ***************************************************************************************************
 *   MCU Family:    STM32F
 *   Compiler:      ARMCC
 ***************************************************************************************************
 *   File:          main.c
 *   Description:   
 *
 ***************************************************************************************************
 *   History:       13.04.2019 - file created
 *
 **************************************************************************************************/

/***************************************************************************************************
 *                                      INCLUDED FILES
 **************************************************************************************************/

#include "RTE_Components.h"
#include CMSIS_device_header

#include "bsp_gpio.h"
#include "cpp_os.h"
#include "misc_macro.h"

extern "C"
{
#include "Board_LED.h"
}

/***************************************************************************************************
 *                                       DEFINITIONS
 **************************************************************************************************/

/***************************************************************************************************
 *                                    PUBLIC FUNCTIONS
 **************************************************************************************************/

#ifdef HAL_MODULE_ENABLED
extern "C"
{
int cpp_main(void)
#else
int main(void)
#endif
{

#if (0)
    // Проверка того, что проект запустился (мигаем светодиодом на борде)
    LED_Initialize();
    for (uint8_t i = 1; i <= 6; i++)
    {
        if (i & 1)
        {
            LED_On(0);
        }
        else
        {
            LED_Off(0);
        }
        for (volatile uint32_t i = 0; i < 0xFFFFF; i++){};
    }
#endif

    SystemCoreClockUpdate();
    
    cpp_os::create_os();
    
    BRK_PTR();

    return 0;
}

#ifdef HAL_MODULE_ENABLED
} // extern "C"
#endif

/***************************************************************************************************
 *                                       END OF FILE
 **************************************************************************************************/
